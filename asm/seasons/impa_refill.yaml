seasons:
  15/impaRefillTable: |
    db TREASURE_EMBER_SEEDS,b5    # <wNumEmberSeeds
    db TREASURE_SCENT_SEEDS,b6    # <wNumScentSeeds
    db TREASURE_PEGASUS_SEEDS,b7  # <wNumPegasusSeeds
    db TREASURE_GALE_SEEDS,b8     # <wNumGaleSeeds
    db TREASURE_MYSTERY_SEEDS,b9  # <wNumMysterySeeds
    db TREASURE_BOMBS,aa          # <wNumBombs
    db TREASURE_SHIELD,00         # Give the item itself and end table

  15/impaRefill: |
    push de
    push hl

    ld hl,impaRefillTable
    
    .refillLoop
    ld a,(hl)
    call checkTreasureObtained
    ldi a,(hl)                    # Put back item in A
    jr nc,.nextElement

    # Treasure was obtained, refill the matching variable if under the threshold
    ld a,(hl)
    or a
    jr z,.giveItem
    push hl
    ld h,c6
    ld l,a
    ld a,(hl)
    cp a,10
    jr nc,.popHLAndNextElement
    ld (hl),10

    .popHLAndNextElement
    pop hl
    .nextElement
    inc hl
    jr .refillLoop

    .giveItem
    ld a,TREASURE_SHIELD
    ld (ff00+8b),a
    ld e,3f
    ld hl,addTreasureToInventory
    call interBankCall

    # Refill health to max
    ld hl,wLinkMaxHealth
    ldd a,(hl)
    ld (hl),a

    # Play a sound and update status bar to give feedback
    ld a,5e # SND_GETSEED
    call playSound
    ld a,03
    ld (wStatusBarNeedsRefresh),a

    pop hl
    pop de
    ret

  0b/74ef/: |
    db checkabutton
    db disableinput
    db showtext,25,03
    db asm15; dw impaRefill
    db enableinput
    db 74,ef # jump back to the beginning of the script

  # Change Impa text to explain that she is providing a refill
  1f/4247/: |
    db 04,b6,04,06,05,a0,05,07,03,d2,03,bd,61,01,72,65,66,69,6c,6c,2e,00

  # Make Like-Like only remove the shield without unsetting the treasure flag
  0c/loseShieldWithoutLosingFlag: |
    call loseTreasure
    ld hl,wObtainedTreasureFlags
    set 1,(hl)
    ret
  0c/5dd2/: call loseShieldWithoutLosingFlag

  # Make Impa always stand in front of her house
  0a/5d57/: |
    db 00,00,00,00,00,00,00,00,00
    db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
    db 00,00,00