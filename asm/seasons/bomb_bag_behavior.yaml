seasons:
  # Extend grab mode D which checks if quantity has bit 7 on.
  # If it does, also increase next byte (max quantity for bombs, 
  # which is the only item which uses mode D)
  3f/: define mode4,4594
  3f/extendedModeD: |
    bit 7,c
    jr z,.done
    res 7,c
    
    .increaseMaxQuantity
    ld h,d
    ld l,e
    inc l
    ld a,(hl)
    add a,c
    daa
    jr nc,.writeNewMaxValue
    ld a,99
    .writeNewMaxValue
    ldd (hl),a
      
    .done
    jp mode4
  3f/45c2/: call extendedModeD
